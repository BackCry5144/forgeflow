# ForgeFlow

**ë²„ì „**: 3.1  
**Phase**: 6 - Production Ready âœ…  
**ìµœì¢… ì—…ë°ì´íŠ¸**: 2025-12-04

AI ê¸°ë°˜ UI í”„ë¡œí† íƒ€ì… ìƒì„± ë° ì‚°ì¶œë¬¼ ìë™í™” ì‹œìŠ¤í…œ (Google Gemini 1.5 Pro)

---

## ğŸ¯ ì£¼ìš” ê¸°ëŠ¥

### í•µì‹¬ ê¸°ëŠ¥
- âœ¨ **Step-by-Step Wizard**: 5ë‹¨ê³„ ë§ˆë²•ì‚¬ë¡œ í™”ë©´ ìš”êµ¬ì‚¬í•­ì„ ì²´ê³„ì ìœ¼ë¡œ ìˆ˜ì§‘
- ğŸ¤– **4-Stage LLM Generation**: í† í° í•œê³„ë¥¼ ê·¹ë³µí•˜ëŠ” 4ë‹¨ê³„ ë¶„í•  í”„ë¡¬í”„íŠ¸ ì „ëµ
- ğŸ“¸ **Auto-Capture ìŠ¤í¬ë¦°ìƒ·**: í”„ë¡œí† íƒ€ì… í™”ë©´ ë° ëª¨ë‹¬ ìë™ ìº¡ì²˜ ê¸°ëŠ¥
- ğŸ“„ **ìë™ ì‚°ì¶œë¬¼ ìƒì„±**: Word ì„¤ê³„ì„œ ìë™ ìƒì„± (ìŠ¤í¬ë¦°ìƒ· í¬í•¨)

### ìƒì„± ì—”ì§„
- ğŸ”„ **Continuation ì¬ì‹œë„**: í† í° ì´ˆê³¼ ì‹œ ìë™ ì´ì–´ë°›ê¸° (MAX_TOKENS ëŒ€ì‘)
- â³ **ì‹¤ì‹œê°„ ì§„í–‰ë¥ **: ë°±ê·¸ë¼ìš´ë“œ ìƒì„± + í´ë§ ê¸°ë°˜ ìƒíƒœ ì¶”ì 
- ğŸ”¢ **Modal State ì •ê·œí™”**: `isModal0Open`, `isModal1Open` ë“± ì¼ê´€ëœ ëª¨ë‹¬ ìƒíƒœ ëª…ëª…

### ë°ì´í„° ê´€ë¦¬
- ğŸ’¾ **ì„ì‹œì €ì¥/ë³µì›**: Wizard ë°ì´í„° ì„ì‹œì €ì¥ ë° ë³µì›
- ğŸ“Š **CSV ì¼ê´„ ë“±ë¡**: ë©”ë‰´ ë°ì´í„° CSV íŒŒì¼ë¡œ ì¼ê´„ ì—…ë¡œë“œ
- ğŸ—„ï¸ **DB ê¸°ë°˜ ë¬¸ì„œ ì €ì¥**: ìƒì„±ëœ ì„¤ê³„ì„œ DB ì €ì¥ ë° ì¬ë‹¤ìš´ë¡œë“œ

### ìºì‹± & ìµœì í™”
- ğŸ—„ï¸ **Context Caching**: Redis ê¸°ë°˜ ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ ìºì‹± (API ë¹„ìš© ì ˆê°)
- âš¡ **Gemini Context Cache**: 32,768+ í† í° ìºì‹± ì¤€ë¹„ (í–¥í›„ RAG í™•ì¥)

---

## ğŸš€ ë¹ ë¥¸ ì‹œì‘ (3ê°€ì§€ ë°©ë²•)

### ë°©ë²• 1: Docker ë°°í¬ (ê¶Œì¥) ğŸ³

```powershell
# 1. í™˜ê²½ ë³€ìˆ˜ ì„¤ì •
copy backend\.env.example backend\.env
# .env íŒŒì¼ì„ ì—´ì–´ GOOGLE_API_KEYë¥¼ ì„¤ì •í•˜ì„¸ìš”

# 2. ë¹Œë“œ ë° ë°°í¬ (ìë™)
.\deploy.ps1

# 3. ì ‘ì†
# http://localhost:8000
```

### ë°©ë²• 2: ìˆ˜ë™ ë¹Œë“œ + Docker

```powershell
# 1. í™˜ê²½ ë³€ìˆ˜ ì„¤ì •
copy backend\.env.example backend\.env

# 2. Frontend ë¹Œë“œ
.\build.ps1

# 3. Docker ì‹¤í–‰
docker-compose up -d

# 4. ì ‘ì†
# http://localhost:8000
```

### ë°©ë²• 3: ê°œë°œ ëª¨ë“œ (ë¡œì»¬)

```powershell
# Terminal 1: PostgreSQL + Redis
docker-compose up postgres redis -d

# Terminal 2: Backend API
cd backend
python -m venv venv
venv\Scripts\activate
pip install -r requirements.txt
copy .env.example .env
# .env íŒŒì¼ì—ì„œ GOOGLE_API_KEY ì„¤ì •
uvicorn main:app --reload --port 8000

# Terminal 3: Frontend Dev Server
cd frontend
npm install
npm run dev
```

**ì ‘ì† ì£¼ì†Œ**:
- ê°œë°œ ëª¨ë“œ: http://localhost:5173 (Frontend Dev Server)
- ë°°í¬ ëª¨ë“œ: http://localhost:8000 (Pythonì´ Frontend ì„œë¹™)
- API ë¬¸ì„œ: http://localhost:8000/docs

---

## ğŸ“¦ í”„ë¡œì íŠ¸ êµ¬ì¡°

```
ForgeFlow/
â”œâ”€â”€ backend/          # Python FastAPI ë°±ì—”ë“œ
â”‚   â”œâ”€â”€ main.py              # ì•± ì—”íŠ¸ë¦¬í¬ì¸íŠ¸
â”‚   â”œâ”€â”€ routers/             # API ë¼ìš°í„°
â”‚   â”‚   â”œâ”€â”€ menus.py         # ë©”ë‰´ CRUD + CSV ì„í¬íŠ¸
â”‚   â”‚   â”œâ”€â”€ screens.py       # í™”ë©´ CRUD + ìŠ¹ì¸ + í”¼ë“œë°±
â”‚   â”‚   â””â”€â”€ ai.py            # AI ìƒì„± API
â”‚   â”œâ”€â”€ services/            # ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
â”‚   â”œâ”€â”€ models/              # SQLAlchemy ëª¨ë¸
â”‚   â”œâ”€â”€ schemas/             # Pydantic ìŠ¤í‚¤ë§ˆ
â”‚   â”œâ”€â”€ utils/               # ìœ í‹¸ë¦¬í‹° (CSV íŒŒì„œ ë“±)
â”‚   â”œâ”€â”€ static/              # Frontend ë¹Œë“œ íŒŒì¼ (ë°°í¬ ì‹œ)
â”‚   â”œâ”€â”€ requirements.txt     # Python ì˜ì¡´ì„±
â”‚   â”œâ”€â”€ Dockerfile           # Docker ì´ë¯¸ì§€
â”‚   â””â”€â”€ .env.example         # í™˜ê²½ ë³€ìˆ˜ í…œí”Œë¦¿
â”‚
â”œâ”€â”€ frontend/                # React + Vite í”„ë¡ íŠ¸ì—”ë“œ
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ pages/           # í˜ì´ì§€ ì»´í¬ë„ŒíŠ¸
â”‚   â”‚   â”œâ”€â”€ components/      # UI ì»´í¬ë„ŒíŠ¸
â”‚   â”‚   â”œâ”€â”€ services/        # API ì„œë¹„ìŠ¤
â”‚   â”‚   â””â”€â”€ types/           # TypeScript íƒ€ì…
â”‚   â”œâ”€â”€ package.json         # Node ì˜ì¡´ì„±
â”‚   â””â”€â”€ vite.config.ts       # Vite ì„¤ì •
â”‚
â”œâ”€â”€ docker-compose.yml       # Docker Compose ì„¤ì •
â”œâ”€â”€ build.ps1                # Frontend ë¹Œë“œ ìŠ¤í¬ë¦½íŠ¸
â”œâ”€â”€ deploy.ps1               # ì „ì²´ ë°°í¬ ìŠ¤í¬ë¦½íŠ¸
â””â”€â”€ README.md                # ì´ íŒŒì¼
```

---

## ğŸ“Š API ì—”ë“œí¬ì¸íŠ¸ (ì´ 20ê°œ)

### ë©”ë‰´ ê´€ë¦¬ (6ê°œ)
| Method | Endpoint | ì„¤ëª… |
|--------|----------|------|
| `POST` | `/api/menus` | ë©”ë‰´ ìƒì„± |
| `POST` | `/api/menus/import` | CSV ì¼ê´„ ì—…ë¡œë“œ |
| `GET` | `/api/menus` | ë©”ë‰´ ëª©ë¡ ì¡°íšŒ |
| `GET` | `/api/menus/{id}` | ë©”ë‰´ ìƒì„¸ ì¡°íšŒ |
| `PUT` | `/api/menus/{id}` | ë©”ë‰´ ìˆ˜ì • |
| `DELETE` | `/api/menus/{id}` | ë©”ë‰´ ì‚­ì œ |

### í™”ë©´ ê´€ë¦¬ (5ê°œ)
| Method | Endpoint | ì„¤ëª… |
|--------|----------|------|
| `POST` | `/api/screens` | í™”ë©´ ìƒì„± |
| `GET` | `/api/screens` | í™”ë©´ ëª©ë¡ ì¡°íšŒ (menu_id í•„í„°) |
| `GET` | `/api/screens/{id}` | í™”ë©´ ìƒì„¸ ì¡°íšŒ |
| `PUT` | `/api/screens/{id}` | í™”ë©´ ìˆ˜ì • |
| `DELETE` | `/api/screens/{id}` | í™”ë©´ ì‚­ì œ |

### AI ìƒì„± (6ê°œ)
| Method | Endpoint | ì„¤ëª… |
|--------|----------|------|
| `POST` | `/api/ai/generate` | í”„ë¡œí† íƒ€ì… ìƒì„± (ë¹„ë™ê¸°) |
| `GET` | `/api/ai/status/{screen_id}` | ìƒì„± ì§„í–‰ ìƒí™© ì¡°íšŒ (í´ë§ìš©) |
| `POST` | `/api/ai/documents/designDoc` | ì„¤ê³„ì„œ(Word) ìƒì„± + ìŠ¤í¬ë¦°ìƒ· |
| `GET` | `/api/ai/screens/{id}/documents/design/download` | ì €ì¥ëœ ì„¤ê³„ì„œ ë‹¤ìš´ë¡œë“œ |
| `PUT` | `/api/ai/screens/{id}/wizard-draft` | Wizard ì„ì‹œì €ì¥ |
| `GET` | `/api/ai/screens/{id}/wizard-draft` | Wizard ë¶ˆëŸ¬ì˜¤ê¸° |

### ìºì‹œ ê´€ë¦¬ (6ê°œ)
| Method | Endpoint | ì„¤ëª… |
|--------|----------|------|
| `GET` | `/api/cache/stats` | ìºì‹œ í†µê³„ ì¡°íšŒ |
| `GET` | `/api/cache/context-cache/status` | Context Cache ìƒíƒœ ì¡°íšŒ |
| `POST` | `/api/cache/context-cache/create` | Context Cache ìˆ˜ë™ ìƒì„± |
| `DELETE` | `/api/cache/clear` | ëª¨ë“  ìºì‹œ ì‚­ì œ |
| `DELETE` | `/api/cache/invalidate` | SYSTEM_PROMPT ìºì‹œ ë¬´íš¨í™” |
| `POST` | `/api/cache/test` | ë””ìì¸ í† í° ìºì‹œ í…ŒìŠ¤íŠ¸ |

**ìƒì„¸ API ë¬¸ì„œ**: http://localhost:8000/docs

---

## ğŸ”§ ê¸°ìˆ  ìŠ¤íƒ

### Backend
- **Framework**: FastAPI 0.104.1
- **Language**: Python 3.11
- **Database**: PostgreSQL 17 Alpine
- **ORM**: SQLAlchemy 2.0
- **Validation**: Pydantic 2.5
- **AI**: Google Gemini 1.5 Pro (google-generativeai)
- **Cache**: Redis (Context Caching)
- **Document**: python-docx (Word ìƒì„±)

### Frontend
- **Framework**: React 18
- **Language**: TypeScript
- **Build Tool**: Vite 5
- **Styling**: TailwindCSS 3.3
- **UI Components**: Shadcn/ui
- **HTTP Client**: Axios
- **Routing**: React Router v6

### DevOps
- **Containerization**: Docker, Docker Compose
- **Database**: PostgreSQL (Docker)
- **Deployment**: Single Python server (ë°°í¬ ëª¨ë“œ)

---

## ğŸ§™ Step-by-Step Wizard êµ¬ì¡°

ForgeFlowì˜ í•µì‹¬ ê¸°ëŠ¥ì€ **5ë‹¨ê³„ Wizard**ë¥¼ í†µí•´ í™”ë©´ ìš”êµ¬ì‚¬í•­ì„ ì²´ê³„ì ìœ¼ë¡œ ìˆ˜ì§‘í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤.

### Wizard 5ë‹¨ê³„ êµ¬ì„±

| ë‹¨ê³„ | ì´ë¦„ | ì„¤ëª… | ìˆ˜ì§‘ ë°ì´í„° |
|:---:|:---|:---|:---|
| **1** | í™”ë©´ ê°œìš” | ê¸°ë³¸ ì •ë³´ ì…ë ¥ | `screenName`, `description` |
| **2** | ë ˆì´ì•„ì›ƒ | í™”ë©´ êµ¬ì¡° ì„ íƒ | `selectedLayout`, `layoutAreas[]` |
| **3** | ì»´í¬ë„ŒíŠ¸ | êµ¬ì„± ìš”ì†Œ ë°°ì¹˜ | `components[]` (íƒ€ì…, ë¼ë²¨, ì˜ì—­) |
| **4** | ì¸í„°ë™ì…˜ | ë™ì‘ ì •ì˜ | `interactions[]` (íŠ¸ë¦¬ê±°, ì•¡ì…˜, ëª¨ë‹¬) |
| **5** | ê²€í†  | ìµœì¢… í™•ì¸ | ì „ì²´ ë°ì´í„° ë¦¬ë·° |

### ì§€ì› ë ˆì´ì•„ì›ƒ íƒ€ì…
- `search-grid`: ê²€ìƒ‰ ì¡°ê±´ + ë°ì´í„° ê·¸ë¦¬ë“œ (ê°€ì¥ ì¼ë°˜ì ì¸ MES í™”ë©´)
- `master-detail`: ë§ˆìŠ¤í„° ê·¸ë¦¬ë“œ + ìƒì„¸ ë·°
- `dashboard`: ëŒ€ì‹œë³´ë“œ ë ˆì´ì•„ì›ƒ
- `kanban`: ì¹¸ë°˜ ë³´ë“œ
- `form`: ë‹¨ìˆœ í¼ í™”ë©´

### ì§€ì› ì»´í¬ë„ŒíŠ¸ íƒ€ì…
- **Form Controls**: `textbox`, `combo`, `checkbox`, `radio`, `date-picker`, `codeview`, `button`
- **Data Display**: `grid`, `chart`, `card`, `badge`, `progress-bar`
- **Special**: `codeview` (íŒì—… ê²€ìƒ‰ìš© íŠ¹ìˆ˜ ì»´í¬ë„ŒíŠ¸)

### ì§€ì› ì¸í„°ë™ì…˜ íƒ€ì…
- **Trigger Events**: `click`, `double-click`, `row-click`, `change`, `submit`
- **Actions**: `fetch-data`, `submit`, `clear`, `open-modal`, `validate`, `navigate`
- **Modal Types**: `form` (ì…ë ¥í¼), `detail` (ìƒì„¸ì •ë³´), `confirm` (í™•ì¸ëŒ€í™”), `custom`

### ëª¨ë‹¬ ìƒíƒœ ëª…ëª… ê·œì¹™ (v3.1)
ëª¨ë‹¬ ìƒíƒœëŠ” ì¸ë±ìŠ¤ ê¸°ë°˜ìœ¼ë¡œ ìë™ ìƒì„±ë©ë‹ˆë‹¤:
```javascript
// ì²« ë²ˆì§¸ ëª¨ë‹¬: isModal0Open
// ë‘ ë²ˆì§¸ ëª¨ë‹¬: isModal1Open
// Në²ˆì§¸ ëª¨ë‹¬: isModal{N-1}Open
const [isModal0Open, setIsModal0Open] = useState(false);
const [isModal1Open, setIsModal1Open] = useState(false);
```

---

## ğŸ¤– 4-Stage LLM Prompt ì „ëµ

### ë¬¸ì œ ì¸ì‹: LLM í† í° í•œê³„

LLMì€ 1íšŒ ì‘ë‹µì—ì„œ ì¶œë ¥í•  ìˆ˜ ìˆëŠ” ìµœëŒ€ í† í° ìˆ˜ê°€ ì œí•œë˜ì–´ ìˆìŠµë‹ˆë‹¤ (ì˜ˆ: Gemini 1.5 Pro = 8192 í† í°).  
ë³µì¡í•œ React ì»´í¬ë„ŒíŠ¸(ê²€ìƒ‰ ì˜ì—­ + ê·¸ë¦¬ë“œ + ë‹¤ìˆ˜ì˜ ëª¨ë‹¬)ë¥¼ í•œ ë²ˆì— ìƒì„±í•˜ë©´ **í† í° ì´ˆê³¼ë¡œ ì½”ë“œê°€ ì˜ë¦¬ëŠ” ë¬¸ì œ**ê°€ ë°œìƒí•©ë‹ˆë‹¤.

### í•´ê²° ì „ëµ: 4ë‹¨ê³„ ë¶„í•  ìƒì„± (ChatSession ê¸°ë°˜)

ForgeFlowëŠ” **ChatSession**ì„ ìœ ì§€í•˜ë©´ì„œ **4ë‹¨ê³„ë¡œ í”„ë¡¬í”„íŠ¸ë¥¼ ë¶„í• **í•˜ì—¬ ìˆœì°¨ì ìœ¼ë¡œ ì½”ë“œë¥¼ ìƒì„±í•©ë‹ˆë‹¤.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    4-Stage Generation Pipeline                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  [Step 1/4] ê¸°ì´ˆ ì„¤ì • ë° ìœ í‹¸ë¦¬í‹°                                â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                              â”‚
â”‚  â€¢ React Hook êµ¬ì¡°ë¶„í•´ (useState, useEffect, useCallback)       â”‚
â”‚  â€¢ Lucide ì•„ì´ì½˜ SVG ì •ì˜                                        â”‚
â”‚  â€¢ sampleData (5ê±´ ì´ìƒ)                                         â”‚
â”‚  â€¢ Modal, CodeView, Input ë“± ê³µí†µ ì»´í¬ë„ŒíŠ¸                       â”‚
â”‚  â€¢ export default function ... { â† ì—¬ê¸°ê¹Œì§€ë§Œ                    â”‚
â”‚                                                                  â”‚
â”‚  [Step 2/4] ìƒíƒœ ë° ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§                                â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                              â”‚
â”‚  â€¢ State ì •ì˜ (searchParams, gridData, isModalOpen ë“±)          â”‚
â”‚  â€¢ Event Handlers (handleSearch, handleReset, openModal ë“±)     â”‚
â”‚  â€¢ UI ë Œë”ë§ ì½”ë“œëŠ” ì•„ì§ X                                       â”‚
â”‚                                                                  â”‚
â”‚  [Step 3/4] ë©”ì¸ í™”ë©´ UI ë Œë”ë§                                  â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                              â”‚
â”‚  â€¢ renderSearchArea() í•¨ìˆ˜                                       â”‚
â”‚  â€¢ renderGridToolbar() í•¨ìˆ˜                                      â”‚
â”‚  â€¢ renderGridArea() í•¨ìˆ˜                                         â”‚
â”‚  â€¢ ë©”ì¸ return ( ... ) ì‹œì‘                                      â”‚
â”‚  â€¢ ëª¨ë‹¬ì€ ì•„ì§ X                                                 â”‚
â”‚                                                                  â”‚
â”‚  [Step 4/4] ëª¨ë‹¬ êµ¬í˜„ ë° ìµœì¢… ì™„ì„±                               â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                              â”‚
â”‚  â€¢ ëª¨ë“  Modal JSX ì‘ì„±                                           â”‚
â”‚  â€¢ return ); ë‹«ê¸°                                                â”‚
â”‚  â€¢ í•¨ìˆ˜ } ë‹«ê¸°                                                   â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### í”„ë¡¬í”„íŠ¸ ì„¤ê³„ í•µì‹¬ ì›ì¹™

1. **ëª…í™•í•œ ê²½ê³„ ì§€ì •**: ê° ë‹¨ê³„ê°€ ì–´ë””ì„œ ëë‚˜ì•¼ í•˜ëŠ”ì§€ ëª…ì‹œ
2. **ì¤‘ë³µ ë°©ì§€ ì§€ì‹œ**: "ì• ë‹¨ê³„ì˜ ì½”ë“œë¥¼ ì ˆëŒ€ ë°˜ë³µí•˜ì§€ ë§ˆì„¸ìš”"
3. **ë¬¸ë§¥ ìœ ì§€**: ChatSessionì„ í†µí•´ ì´ì „ ì¶œë ¥ì„ LLMì´ ê¸°ì–µ
4. **êµ¬ì¡°ì  íŒíŠ¸**: `{ ì—¬ëŠ” ì¤‘ê´„í˜¸ê¹Œì§€ë§Œ`, `return ( ì‹œì‘` ë“± êµ¬ì²´ì  ì§€ì‹œ

### ì½”ë“œ ìœ„ì¹˜: `backend/utils/prompt_templates.py`

```python
# 4ë‹¨ê³„ í”„ë¡¬í”„íŠ¸ ìƒì„± í•¨ìˆ˜
get_step_1_prompt(wizard_data)  # ìœ í‹¸ë¦¬í‹°, ì•„ì´ì½˜, ê³µí†µ ì»´í¬ë„ŒíŠ¸
get_step_2_prompt(wizard_data)  # ìƒíƒœ, í•¸ë“¤ëŸ¬ ë¡œì§
get_step_3_prompt(wizard_data)  # ë©”ì¸ UI ë Œë”ë§
get_step_4_prompt(wizard_data)  # ëª¨ë‹¬ ë° íŒŒì¼ ì™„ì„±
```

---

## ğŸ”„ Continuation ì¬ì‹œë„ ë©”ì»¤ë‹ˆì¦˜

### ë¬¸ì œ: ë‹¨ê³„ ë‚´ì—ì„œë„ í† í° ì´ˆê³¼

4ë‹¨ê³„ë¡œ ë¶„í• í•´ë„, ë³µì¡í•œ ëª¨ë‹¬ì´ ë§ì€ ê²½ìš° **ë‹¨ì¼ ë‹¨ê³„ ë‚´ì—ì„œ í† í° ì´ˆê³¼**ê°€ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.  
ì´ë•Œ LLMì€ `finish_reason = MAX_TOKENS (ê°’: 2)`ë¥¼ ë°˜í™˜í•˜ë©° ì‘ë‹µì´ ì˜ë¦½ë‹ˆë‹¤.

### í•´ê²°: ìë™ Continuation (ì´ì–´ë°›ê¸°)

```python
async def _handle_step_continuation(self, chat_session, initial_response, step_name):
    """ê° ë‹¨ê³„ ë‚´ì—ì„œ í† í°ì´ ì˜ë ¸ì„ ë•Œ ë¬¸ë§¥ì„ ìœ ì§€í•˜ë©° ì´ì–´ë°›ê¸°"""
    full_text = initial_response.text
    finish_reason = initial_response.candidates[0].finish_reason
    
    attempt = 0
    while finish_reason == 2 and attempt < self.max_continuation_attempts:  # 2 = MAX_TOKENS
        attempt += 1
        
        # ë§ˆì§€ë§‰ 100ìë¥¼ ì»¨í…ìŠ¤íŠ¸ë¡œ ì œê³µ
        last_chars = full_text.strip()[-100:]
        continuation_prompt = (
            f"âš ï¸ SYSTEM: Previous response was truncated. "
            f"CONTINUE generating the code exactly from where it stopped:\n"
            f"...{last_chars}\n"
            f"(Do NOT repeat the context above. Just output the rest of the code.)"
        )
        
        response = await self._send_chat_with_retry(chat_session, continuation_prompt, ...)
        full_text += response.text  # ì´ì–´ë¶™ì´ê¸°
        finish_reason = response.candidates[0].finish_reason
    
    return full_text
```

### Continuation íë¦„ë„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  Continuation Flow (ì˜ˆ: Step 4)              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                               â”‚
â”‚  [Initial Request]                                            â”‚
â”‚       â†“                                                       â”‚
â”‚  LLM Response (1ì°¨)                                           â”‚
â”‚       â†“                                                       â”‚
â”‚  finish_reason == MAX_TOKENS (2)?                            â”‚
â”‚       â”œâ”€ No  â†’ ì™„ë£Œ, ë‹¤ìŒ ë‹¨ê³„ë¡œ                              â”‚
â”‚       â””â”€ Yes â†’ Continuation ì‹œì‘                              â”‚
â”‚              â†“                                                â”‚
â”‚  "...ë§ˆì§€ë§‰ 100ì ì»¨í…ìŠ¤íŠ¸...                                 â”‚
â”‚   CONTINUE from where you stopped"                            â”‚
â”‚              â†“                                                â”‚
â”‚  LLM Response (2ì°¨) â†’ ì´ì–´ë¶™ì´ê¸°                              â”‚
â”‚              â†“                                                â”‚
â”‚  finish_reason ë‹¤ì‹œ ì²´í¬                                      â”‚
â”‚       â”œâ”€ No  â†’ ì™„ë£Œ                                           â”‚
â”‚       â””â”€ Yes â†’ ìµœëŒ€ 3íšŒê¹Œì§€ ë°˜ë³µ                              â”‚
â”‚                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ì„¤ì •ê°’

| ì„¤ì • | ê°’ | ì„¤ëª… |
|:---|:---:|:---|
| `max_continuation_attempts` | 3 | ë‹¨ê³„ë‹¹ ìµœëŒ€ ì´ì–´ë°›ê¸° ì‹œë„ íšŸìˆ˜ |
| `max_quota_retries` | 10 | API í• ë‹¹ëŸ‰ ì´ˆê³¼ ì‹œ ì¬ì‹œë„ íšŸìˆ˜ |
| `retry_delay_seconds` | 60 | í• ë‹¹ëŸ‰ ëŒ€ê¸° ì‹œê°„ (ì´ˆ) |

---

## ğŸ“¡ API í• ë‹¹ëŸ‰ ì¬ì‹œë„ (Quota Retry)

Google Gemini APIëŠ” ë¶„ë‹¹ ìš”ì²­ ìˆ˜ê°€ ì œí•œë©ë‹ˆë‹¤. í• ë‹¹ëŸ‰ ì´ˆê³¼ ì‹œ `ResourceExhausted` ì—ëŸ¬ê°€ ë°œìƒí•©ë‹ˆë‹¤.

### ìë™ ì¬ì‹œë„ ë¡œì§

```python
async def _send_chat_with_retry(self, chat_session, prompt, operation_name):
    for attempt in range(self.max_quota_retries + 1):
        try:
            response = await chat_session.send_message_async(prompt, ...)
            return response
        except google_exceptions.ResourceExhausted:
            if attempt < self.max_quota_retries:
                logger.warning(f"â³ Quota exceeded. Retrying in 60s...")
                await asyncio.sleep(60)  # 1ë¶„ ëŒ€ê¸° í›„ ì¬ì‹œë„
            else:
                raise AIServiceError("quota_exceeded", "Quota exceeded after max retries")
```

---

## ğŸ’¾ Context Caching (Redis + Gemini)

### Redis ê¸°ë°˜ ìºì‹±
SYSTEM_PROMPTì˜ í•´ì‹œê°’ì„ ê¸°ë°˜ìœ¼ë¡œ Redisì— ìºì‹œ ì •ë³´ë¥¼ ì €ì¥í•©ë‹ˆë‹¤.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Context Caching Flow                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  1. SYSTEM_PROMPT í•´ì‹œ ìƒì„± (SHA256)                        â”‚
â”‚           â†“                                                  â”‚
â”‚  2. Redisì—ì„œ ìºì‹œ ì¡°íšŒ                                      â”‚
â”‚           â†“                                                  â”‚
â”‚     â”Œâ”€ HIT  â†’ ìºì‹œëœ Contextë¡œ ChatSession ì‹œì‘             â”‚
â”‚     â””â”€ MISS â†’ ìƒˆ ChatSession ìƒì„± + Redisì— ì €ì¥            â”‚
â”‚                                                              â”‚
â”‚  TTL: 1ì‹œê°„ (API í• ë‹¹ëŸ‰ì— ë§ì¶° ì¡°ì • ê°€ëŠ¥)                    â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Gemini Context Caching (v3.1)
Google Gemini APIì˜ Context Caching ê¸°ëŠ¥ì„ í™œìš©í•˜ì—¬ ë¹„ìš©ì„ ì ˆê°í•©ë‹ˆë‹¤.

| í•­ëª© | í˜„ì¬ ìƒíƒœ | ëª©í‘œ |
|------|----------|------|
| SYSTEM_PROMPT í† í° | ~2,000 | ~40,000+ (RAG í™•ì¥ ì‹œ) |
| ìµœì†Œ í•„ìš” í† í° | 32,768 | - |
| ë¹„ìš© ì ˆê°ìœ¨ | - | ìµœëŒ€ 75% (ìºì‹œ ì ìš© ì‹œ) |

### ìºì‹œ ê´€ë¦¬ API
```bash
# ìºì‹œ ìƒíƒœ í™•ì¸
curl http://localhost:8000/api/cache/context-cache/status

# ìºì‹œ ìˆ˜ë™ ìƒì„±
curl -X POST http://localhost:8000/api/cache/context-cache/create

# ìºì‹œ ë¬´íš¨í™” (SYSTEM_PROMPT ë³€ê²½ ì‹œ)
curl -X DELETE http://localhost:8000/api/cache/invalidate
```

---

## ğŸ“„ ìë™ ì‚°ì¶œë¬¼ ìƒì„±

### Word ì„¤ê³„ì„œ ìƒì„± (`DocumentService`)

Wizard ë°ì´í„°ì™€ ìƒì„±ëœ React ì½”ë“œë¥¼ ë¶„ì„í•˜ì—¬ Word ì„¤ê³„ì„œë¥¼ ìë™ ìƒì„±í•©ë‹ˆë‹¤.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Document Generation Flow                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  [Inputs]                                                    â”‚
â”‚  â€¢ wizard_data (5ë‹¨ê³„ ìˆ˜ì§‘ ë°ì´í„°)                           â”‚
â”‚  â€¢ prototype_html (ìƒì„±ëœ React ì½”ë“œ)                        â”‚
â”‚  â€¢ screenshots[] (ìë™ ìº¡ì²˜ëœ í™”ë©´ë“¤)                        â”‚
â”‚            â†“                                                 â”‚
â”‚  [LLM Analysis]                                              â”‚
â”‚  â€¢ ì½”ë“œì—ì„œ State, Handler, Layout ì •ë³´ ì¶”ì¶œ                 â”‚
â”‚  â€¢ JSON í˜•ì‹ìœ¼ë¡œ êµ¬ì¡°í™”                                      â”‚
â”‚            â†“                                                 â”‚
â”‚  [Word Template Filling]                                     â”‚
â”‚  â€¢ {{SCREEN_NAME}}, {{DESCRIPTION}} ì¹˜í™˜                     â”‚
â”‚  â€¢ {{SCREENSHOT}} ì´ë¯¸ì§€ ì‚½ì…                                â”‚
â”‚  â€¢ {{UI_STRUCTURE}} íŠ¸ë¦¬ í…Œì´ë¸” ìƒì„±                         â”‚
â”‚  â€¢ {{USER_FLOW}} ë™ì‘ ìˆœì„œ í…Œì´ë¸”                            â”‚
â”‚  â€¢ {{TABLE:STATE}}, {{TABLE:EVENT}} í…Œì´ë¸”                   â”‚
â”‚            â†“                                                 â”‚
â”‚  [Output]                                                    â”‚
â”‚  â€¢ Word íŒŒì¼ (BytesIO) â†’ DB ì €ì¥ + ë‹¤ìš´ë¡œë“œ                  â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ìŠ¤í¬ë¦°ìƒ· ìë™ ìº¡ì²˜ (v3.1)

í”„ë¡œí† íƒ€ì… ìƒì„± í›„ **Auto-Capture** ê¸°ëŠ¥ìœ¼ë¡œ í™”ë©´ê³¼ ëª¨ë‹¬ì„ ìë™ ìº¡ì²˜í•©ë‹ˆë‹¤.

```typescript
// ìº¡ì²˜ ìˆœì„œ
1. ë©”ì¸ í™”ë©´ (main)
2. ëª¨ë‹¬ 0 (modal-0)
3. ëª¨ë‹¬ 1 (modal-1)
...
N. ëª¨ë‹¬ N-1 (modal-{N-1})
```

### DB ì €ì¥ ë° ì¬ë‹¤ìš´ë¡œë“œ
ìƒì„±ëœ ì„¤ê³„ì„œëŠ” DBì— ë°”ì´ë„ˆë¦¬ë¡œ ì €ì¥ë˜ë©°, ì´í›„ ì¬ë‹¤ìš´ë¡œë“œê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤.

```bash
# ì„¤ê³„ì„œ ìƒì„± (ìŠ¤í¬ë¦°ìƒ· í¬í•¨)
curl -X POST http://localhost:8000/api/ai/documents/designDoc \
  -F "screen_id=1" \
  -F "screenshots=@main.png" \
  -F "screenshots=@modal-0.png" \
  -F "screenshot_labels=ë©”ì¸ í™”ë©´" \
  -F "screenshot_labels=ìƒì„¸ ëª¨ë‹¬"

# ì €ì¥ëœ ì„¤ê³„ì„œ ë‹¤ìš´ë¡œë“œ
curl http://localhost:8000/api/ai/screens/1/documents/design/download
```

---

## ğŸ—„ï¸ ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ

```sql
-- ë©”ë‰´ í…Œì´ë¸”
CREATE TABLE menus (
    id SERIAL PRIMARY KEY,
    name VARCHAR(255) UNIQUE NOT NULL,
    description TEXT,
    created_at TIMESTAMP DEFAULT NOW(),
    updated_at TIMESTAMP DEFAULT NOW()
);

-- í™”ë©´ í…Œì´ë¸”
CREATE TABLE screens (
    id SERIAL PRIMARY KEY,
    menu_id INTEGER REFERENCES menus(id),
    name VARCHAR(255) NOT NULL,
    description TEXT,
    prompt TEXT,
    prototype_html TEXT,
    design_doc BYTEA,                    -- Word íŒŒì¼ ë°”ì´ë„ˆë¦¬ ì €ì¥ (v3.1)
    wizard_data JSONB,                   -- Wizard ë°ì´í„° ì €ì¥
    status VARCHAR(50) DEFAULT 'draft',
    -- ìƒì„± ìƒíƒœ ì¶”ì  (v3.1)
    generation_status VARCHAR(50) DEFAULT 'idle',
    generation_progress INTEGER DEFAULT 0,
    generation_message TEXT,
    generation_step INTEGER DEFAULT 0,
    retry_count INTEGER DEFAULT 0,
    created_at TIMESTAMP DEFAULT NOW(),
    updated_at TIMESTAMP DEFAULT NOW()
);

-- í”¼ë“œë°± í…Œì´ë¸”
CREATE TABLE feedback (
    id SERIAL PRIMARY KEY,
    screen_id INTEGER REFERENCES screens(id),
    content TEXT NOT NULL,
    created_at TIMESTAMP DEFAULT NOW()
);
```

### ìƒì„± ìƒíƒœ (GenerationStatus)
| ê°’ | ì„¤ëª… |
|---|---|
| `idle` | ìƒì„± ì „ ë˜ëŠ” ì™„ë£Œ í›„ |
| `saving_wizard` | Wizard ë°ì´í„° ì €ì¥ ì¤‘ |
| `requesting_ai` | AI API ìš”ì²­ ì¤‘ |
| `waiting_quota` | í• ë‹¹ëŸ‰ ëŒ€ê¸° ì¤‘ (ì¬ì‹œë„) |
| `generating` | ì½”ë“œ ìƒì„± ì¤‘ |
| `validating` | ê²€ì¦ ì¤‘ |
| `completed` | ì™„ë£Œ |
| `failed` | ì‹¤íŒ¨ |

---

## ğŸ§ª í…ŒìŠ¤íŠ¸ ë°©ë²•

### 1. Health Check
```powershell
curl http://localhost:8000/health
# {"status": "healthy"}
```

### 2. CSV ì—…ë¡œë“œ í…ŒìŠ¤íŠ¸
```powershell
# test-menus-simple.csv ì‚¬ìš©
curl -X POST http://localhost:8000/api/menus/import `
  -F "file=@test-menus-simple.csv"
```

### 3. í”„ë¡œí† íƒ€ì… ìƒì„± í…ŒìŠ¤íŠ¸
```powershell
# í™”ë©´ ìƒì„±
$body = @{
    menu_id = 1
    name = "ë¡œê·¸ì¸ í˜ì´ì§€"
    description = "ì‚¬ìš©ì ì¸ì¦ í™”ë©´"
} | ConvertTo-Json

curl -X POST http://localhost:8000/api/screens `
  -H "Content-Type: application/json" `
  -d $body

# AI ìƒì„±
$aiBody = @{
    screen_id = 1
    prompt = "ì´ë©”ì¼ê³¼ ë¹„ë°€ë²ˆí˜¸ ì…ë ¥ í¼, ë¡œê·¸ì¸ ë²„íŠ¼ì´ ìˆëŠ” í™”ë©´"
    menu_name = "ì‚¬ìš©ì ê´€ë¦¬"
    screen_name = "ë¡œê·¸ì¸ í˜ì´ì§€"
} | ConvertTo-Json

curl -X POST http://localhost:8000/api/ai/generate `
  -H "Content-Type: application/json" `
  -d $aiBody
```

---

## ğŸ“– ì‚¬ìš© ê°€ì´ë“œ

### 1. ë©”ë‰´ ë“±ë¡
1. CSV íŒŒì¼ ì¤€ë¹„ (`test-menus-simple.csv` ì°¸ê³ )
2. ë©”ë‰´ ëª©ë¡ í˜ì´ì§€ì—ì„œ "CSV ì„í¬íŠ¸" í´ë¦­
3. íŒŒì¼ ì—…ë¡œë“œ â†’ ë©”ë‰´ ìë™ ìƒì„±

### 2. í™”ë©´ ìƒì„± ë° í”„ë¡œí† íƒ€ì… ìƒì„±
1. ë©”ë‰´ ì„ íƒ â†’ "í™”ë©´ ì¶”ê°€" í´ë¦­
2. í™”ë©´ ì •ë³´ ì…ë ¥ (ì´ë¦„, ì„¤ëª…)
3. **5ë‹¨ê³„ Wizard** ìˆœì„œëŒ€ë¡œ ì§„í–‰:
   - Step 1: í™”ë©´ ê°œìš” ì…ë ¥
   - Step 2: ë ˆì´ì•„ì›ƒ ì„ íƒ
   - Step 3: ì»´í¬ë„ŒíŠ¸ ë°°ì¹˜
   - Step 4: ì¸í„°ë™ì…˜ ì •ì˜
   - Step 5: ê²€í†  ë° ìƒì„±
4. "í”„ë¡œí† íƒ€ì… ìƒì„±" í´ë¦­ â†’ ì§„í–‰ë¥  ëª¨ë‹¬ í‘œì‹œ
5. 15-20ì´ˆ ëŒ€ê¸° â†’ HTML í”„ë¡œí† íƒ€ì… ìƒì„± ì™„ë£Œ

### 3. ì„¤ê³„ì„œ ìƒì„± (v3.1)
1. í”„ë¡œí† íƒ€ì… ìƒì„± ì™„ë£Œ í›„
2. "ì„¤ê³„ì„œ ìƒì„±" ë²„íŠ¼ í´ë¦­
3. **Auto-Capture**ê°€ ë©”ì¸ í™”ë©´ + ëª¨ë‹¬ ìë™ ìº¡ì²˜
4. LLMì´ ì½”ë“œ ë¶„ì„ â†’ Word ì„¤ê³„ì„œ ìƒì„±
5. ìë™ ë‹¤ìš´ë¡œë“œ + DB ì €ì¥

### 4. ì„ì‹œì €ì¥ & ë³µì›
- **ì„ì‹œì €ì¥**: Wizard ì‘ì—… ì¤‘ "ì„ì‹œì €ì¥" í´ë¦­
- **ë³µì›**: í™”ë©´ ì„ íƒ ì‹œ ì €ì¥ëœ Wizard ë°ì´í„° ìë™ ë¡œë“œ

---

## âš ï¸ ë¬¸ì œ í•´ê²°

### Docker ì»¨í…Œì´ë„ˆ ì‹œì‘ ì‹¤íŒ¨
```powershell
# ë¡œê·¸ í™•ì¸
docker-compose logs -f

# í¬íŠ¸ ì¶©ëŒ í™•ì¸ (8000, 5432)
netstat -ano | findstr :8000
netstat -ano | findstr :5432

# ì»¨í…Œì´ë„ˆ ì¬ì‹œì‘
docker-compose restart
```

### Frontend ë¹Œë“œ ì‹¤íŒ¨
```powershell
# node_modules ì¬ì„¤ì¹˜
cd frontend
Remove-Item node_modules -Recurse -Force
npm install
npm run build
```

### Database ì—°ê²° ì‹¤íŒ¨
```powershell
# PostgreSQL ì»¨í…Œì´ë„ˆ ìƒíƒœ í™•ì¸
docker-compose ps

# DB ë¡œê·¸ í™•ì¸
docker-compose logs postgres

# DB ì¬ì‹œì‘
docker-compose restart postgres
```

### Google Gemini API ì—ëŸ¬
- `.env` íŒŒì¼ì—ì„œ `GOOGLE_API_KEY` í™•ì¸
- API í‚¤ ìœ íš¨ì„± í™•ì¸: https://aistudio.google.com/apikey
- API ì‚¬ìš©ëŸ‰ í™•ì¸: https://console.cloud.google.com/apis
- í• ë‹¹ëŸ‰ ì´ˆê³¼ ì‹œ ìë™ ì¬ì‹œë„ (ìµœëŒ€ 10íšŒ, 60ì´ˆ ê°„ê²©)

---

## ğŸ“š ì¶”ê°€ ë¬¸ì„œ

- [API ëª…ì„¸ì„œ](API_SPEC.md) - ì „ì²´ API ì—”ë“œí¬ì¸íŠ¸ ìƒì„¸
- [ë°°í¬ ê°€ì´ë“œ](DEPLOYMENT.md) - í”„ë¡œë•ì…˜ ë°°í¬ ë°©ë²•
- [ì‚¬ìš©ì ê°€ì´ë“œ](USER_GUIDE.md) - ê¸°ëŠ¥ë³„ ì‚¬ìš©ë²•
- [ê°œë°œ ê³„íš](ForgeFlow_Lite_ê°œë°œê³„íš.md) - ì „ì²´ ê°œë°œ ë¡œë“œë§µ

---

## ğŸ—ï¸ ì•„í‚¤í…ì²˜ ë‹¤ì´ì–´ê·¸ë¨

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                             ForgeFlow Architecture                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                         Frontend (React + TypeScript)                â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚
â”‚  â”‚  â”‚ MenuListPage â”‚  â”‚ MenuDetail   â”‚  â”‚ ScreenWorkspacePage      â”‚  â”‚   â”‚
â”‚  â”‚  â”‚              â”‚  â”‚ Page         â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚  â”‚   â”‚
â”‚  â”‚  â”‚ â€¢ CSV Import â”‚  â”‚ â€¢ í™”ë©´ ëª©ë¡  â”‚  â”‚ â”‚ PrototypeWizard    â”‚   â”‚  â”‚   â”‚
â”‚  â”‚  â”‚ â€¢ ë©”ë‰´ íŠ¸ë¦¬  â”‚  â”‚ â€¢ í™”ë©´ ì¶”ê°€  â”‚  â”‚ â”‚ (5-Step)           â”‚   â”‚  â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚  â”‚   â”‚
â”‚  â”‚                                       â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚  â”‚   â”‚
â”‚  â”‚                                       â”‚ â”‚ PreviewPanel       â”‚   â”‚  â”‚   â”‚
â”‚  â”‚                                       â”‚ â”‚ (React Preview)    â”‚   â”‚  â”‚   â”‚
â”‚  â”‚                                       â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚  â”‚   â”‚
â”‚  â”‚                                       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                    â”‚                                        â”‚
â”‚                                    â”‚ Axios (REST API)                       â”‚
â”‚                                    â–¼                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                         Backend (FastAPI + Python)                   â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚
â”‚  â”‚  â”‚ /api/menus  â”‚  â”‚/api/screens â”‚  â”‚ /api/ai/    â”‚  â”‚ /api/cache â”‚ â”‚   â”‚
â”‚  â”‚  â”‚             â”‚  â”‚             â”‚  â”‚ generate    â”‚  â”‚            â”‚ â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚
â”‚  â”‚         â”‚                â”‚                â”‚                â”‚       â”‚   â”‚
â”‚  â”‚         â–¼                â–¼                â–¼                â–¼       â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚
â”‚  â”‚  â”‚                       Services Layer                          â”‚ â”‚   â”‚
â”‚  â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚   â”‚
â”‚  â”‚  â”‚  AIService           â”‚ DocumentService  â”‚ CacheService        â”‚ â”‚   â”‚
â”‚  â”‚  â”‚  â€¢ 4-Stage Prompt    â”‚ â€¢ Word ìƒì„±      â”‚ â€¢ Redis ìºì‹œ        â”‚ â”‚   â”‚
â”‚  â”‚  â”‚  â€¢ Continuation      â”‚ â€¢ LLM ë¶„ì„       â”‚ â€¢ Context Cache     â”‚ â”‚   â”‚
â”‚  â”‚  â”‚  â€¢ Quota Retry       â”‚ â€¢ Template Fill  â”‚                     â”‚ â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚
â”‚  â”‚                               â”‚                                    â”‚   â”‚
â”‚  â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚   â”‚
â”‚  â”‚         â–¼                     â–¼                     â–¼              â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚   â”‚
â”‚  â”‚  â”‚ PostgreSQL â”‚       â”‚ Google     â”‚       â”‚   Redis    â”‚          â”‚   â”‚
â”‚  â”‚  â”‚ (DB)       â”‚       â”‚ Gemini API â”‚       â”‚   (Cache)  â”‚          â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”® í–¥í›„ ë¡œë“œë§µ

### v3.2: RAG + Context Caching ê³ ë„í™”
- ChromaDB ê¸°ë°˜ Knowledge Base êµ¬ì¶•
- SYSTEM_PROMPT í™•ì¥ (35,000+ í† í°)
- ì»´í¬ë„ŒíŠ¸/ë ˆì´ì•„ì›ƒ ì˜ˆì œ ë¼ì´ë¸ŒëŸ¬ë¦¬
- Few-Shot Learning ì ìš©

### v3.3: Smart Refinement
- Code Chunking (ë¸”ë¡ ê¸°ë°˜ ë¶„í•´)
- Semantic Routing (ìˆ˜ì • ëŒ€ìƒ ìë™ ì‹ë³„)
- ë¶€ë¶„ ì¬ìƒì„± (Surgical Update)

### v4.0: ê³ ê¸‰ ê¸°ëŠ¥
- LangChain Agent í†µí•©
- PyTorch ê¸°ë°˜ ì‹œê°ì  QA ëª¨ë¸
- n8n ì›Œí¬í”Œë¡œìš° ìë™í™”
- MCP (Model Context Protocol) ì„œë²„

### ì¥ê¸° ê³„íš
- í˜‘ì—… ê¸°ëŠ¥ (ì‹¤ì‹œê°„ í¸ì§‘)
- ë‹¤êµ­ì–´ ì§€ì›
- PPT/Excel ì‚°ì¶œë¬¼ ì§€ì›
- Agentic AI (ììœ¨ í…ŒìŠ¤íŠ¸ ì‹¤í–‰)

---

## ğŸ“š ê´€ë ¨ ë¬¸ì„œ

- [ForgeFlow ë§ˆìŠ¤í„°í”Œëœ](01.Docs/ForgeFlow_MasterPlan.md) - ì¢…í•© ì—…ê·¸ë ˆì´ë“œ ë¡œë“œë§µ
- [RAG + Context Caching ê³„íš](01.Docs/RAG_Context_Caching_Plan.md) - í•˜ì´ë¸Œë¦¬ë“œ ì „ëµ
- [LLM ì‹œìŠ¤í…œ ê°œìš”](01.Docs/LLM_SYSTEM_OVERVIEW_ko.md) - ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜
- [í”„ë¡¬í”„íŠ¸ ì „ëµ ìƒì„¸](01.Docs/Prompt_Steragy.md) - í”„ë¡¬í”„íŠ¸ ì—”ì§€ë‹ˆì–´ë§
- [ê°œë°œ ê³„íš](01.Docs/ForgeFlow_Lite_ê°œë°œê³„íš.md) - ê°œë°œ ë¡œë“œë§µ
- [n8n Context Cache](01.Docs/n8n_ContextCache.md) - n8n í†µí•© ì „ëµ
